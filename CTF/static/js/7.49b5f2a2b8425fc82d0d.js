webpackJsonp([7],{"8uMx":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("4YfN"),i=a.n(s),n=a("x11r"),o=a.n(n),r=a("9F6s"),l=a("2bvH"),c=a("VKKs"),_=a("MQTS"),m=o()(["(",")!"],["(",")!"]),h=Object(l.a)("match"),u=(h.mapState,h.mapMutations),d={components:{"v-header":r.a},name:"home",inject:["reload"],data:function(){return{ad_logo:{jump:"/",hasLink:!1,url:null},distance_match_time:0,match_all_time:0,format_time:"",match_status:-1,dialogVisible:!1,match_id:"",hash:"",format_str:{day:this.$t("dialog_list.day"),hours:this.$t("dialog_list.hours"),minutes:this.$t("dialog_list.minutes"),seconds:this.$t("dialog_list.seconds")},match_all_data:"",user:JSON.parse(localStorage.isUserLogin).user,team:JSON.parse(localStorage.isUserLogin).team,lang_statu:!0,notice_list_all:[],notice_max_id:0,tips_max_id:0,notice_timer:null,changName:!1,headNameForm:{teamName:Object(c.a)("isUserLogin","object").team.data.name,userName:Object(c.a)("isUserLogin","object").user.nickname},def_team_name:Object(c.a)("isUserLogin","object").team.data.name,headNameRules:{teamName:[{required:!0,message:this.$t("team.createTeamPlaceholder"),trigger:"blur"},{min:3,max:12,message:this.$t("selfHelp_competition.leng3_12"),trigger:"blur"}],userName:[{required:!0,message:this.$t("login.nickname"),trigger:"blur"},{min:3,max:12,message:this.$t("selfHelp_competition.leng3_12"),trigger:"blur"}]},teamerNameRules:{userName:[{required:!0,message:this.$t("login.nickname"),trigger:"blur"},{min:3,max:12,message:this.$t("selfHelp_competition.leng3_12"),trigger:"blur"}]}}},created:function(){var t=this;!this.user.is_used&&this.user.is_temp&&(this.changName=!0),this.match_id=this.$route.query.event,this.hash=this.$route.query.hash,localStorage.lang?"CN"==localStorage.lang?this.lang_statu=!0:this.lang_statu=!1:this.lang_statu=!0;var e=this.match_id+"noticeMaxId";localStorage[e]&&(this.notice_max_id=Object(c.a)(this.match_id+"noticeMaxId","number"));var a=this;this.$route.query;this.$http.get("/api/evts/"+this.hash).then(function(e){t.ad_logo.url=e.data.logo?e.data.logo:"../../../static/img/world.png",-1!=t.$route.fullPath.indexOf("ranking")?t.rank_active=!0:t.rank_active=!1;var a=e.data;if(2!==a.process&&(e.data.is_signup||(1==e.data.mode?t.$http.post("/api/evts/signup_users",{evt:t.match_id}).catch(function(t){}):t.$http.post("/api/evts/signup_teams",{evt:t.match_id}).catch(function(t){}))),t.match_all_data=a,t.setData({match_data:a}),t.match_status=a.process,t.match_all_time=1e3*parseInt(a.all_seconds),t.distance_match_time=1e3*parseInt(a.remain_seconds),2==a.process)a.is_replay||(t.dialogVisible=!0);else{t.notice_timer=setInterval(function(){t.get_notice()},15e3),t.format_time=Object(_.a)(t.distance_match_time);var s=setInterval(function(){t.distance_match_time-=1e3,t.distance_match_time<0&&(1==t.match_status?(t.reload(),t.match_status=0,t.distance_match_time=t.match_all_time,a.process=0,t.setData({match_data:a})):(t.distance_match_time=0,a.process=2,t.setData({match_data:a}),t.match_status=2,t.dialogVisible=!0,clearInterval(s),t.user.is_temp&&setTimeout(function(){localStorage.removeItem("isUserLogin"),t.setData({show_now_task:!1}),t.$router.push({path:"/"}),t.reload()},2e3))),t.format_time=Object(_.a)(t.distance_match_time)},1e3)}}).catch(function(e){switch(e.response.status){case 404:a.$router.push({name:"error-404"});break;case 500:a.$router.push({name:"error-500"});break;default:e.message=t.$t("dialog_list.sys_err")(m,e.response.status)}}),this.get_notice(),Object(c.b)(this.headNameForm.userName+"notfirstLanding",!0)},beforeDestroy:function(){clearInterval(this.notice_timer)},methods:i()({},u(["setData"]),{get_notice:function(){var t=this;this.$http.get("/api/evts/notices",{params:{evt:this.match_id,id:this.notice_max_id}}).then(function(e){var a,s=e.data,i=[];if(i=s.filter(function(t,e){return 1==t.is_task}),a=s.filter(function(t,e){return 0==t.is_task}),t.setData({system_notice:a}),0==t.match_status&&i.length){var n=[];i.forEach(function(e,a){n.push(e.id),t.blood_tips(t.$t("dialog_list.tips"),"EN"==t.$i18n.locale?e.notice_en:e.notice)});var o;o=Math.max.apply(null,n),t.notice_max_id=o,Object(c.b)(t.match_id+"noticeMaxId",o)}}).catch(function(t){}),this.$http.get("/api/evts/task_notices",{params:{evt:this.match_id}}).then(function(e){var a=e.data;t.setData({tips_notice:a})}).catch(function(t){})},blood_tips:function(t,e){var a=this,s=this.$createElement;setTimeout(function(){a.$notify({title:a.$t("dialog_list.tips"),message:s("i",{style:"color: #fff"},e),type:"success"})},500)},change_lang_cn:function(){this.$i18n.locale="CN",localStorage.lang="CN",this.lang_statu=!0,this.reload()},change_lang_en:function(){this.$i18n.locale="EN",localStorage.lang="EN",this.lang_statu=!1,this.reload()},changNameHandle:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return!1;e.$http.post("/api/evts/edit/profile",{user_name:e.headNameForm.userName,team_name:e.headNameForm.teamName}).then(function(t){t.data.success&&(e.$notify.success({title:e.$t("dialog_list.tips"),message:e.$t("team.handle_success")}),e.cancel_changeName())})})},cancel_changeName:function(){this.changName=!1;var t=JSON.parse(localStorage.isUserLogin);t.user.is_used=!0,Object(c.b)("isUserLogin",t),this.reload()}}),computed:{}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("v-header",{attrs:{show_lang:"true",logo:t.ad_logo}},[a("div",{attrs:{slot:"nav_content"},slot:"nav_content"},[a("div",{staticClass:"tab-item"},[a("router-link",{attrs:{to:{path:"/match/guide",query:{event:t.match_id,hash:t.hash}}}},[t._v(t._s(t.$t("header.match.guide")))])],1),t._v(" "),a("div",{staticClass:"tab-item"},[a("router-link",{attrs:{to:{path:"/match/notice",query:{event:t.match_id,hash:t.hash}}}},[t._v(t._s(t.$t("header.match.notice")))])],1),t._v(" "),a("div",{staticClass:"tab-item"},[a("router-link",{attrs:{to:{path:"/match/contest_challenge",query:{event:t.match_id,hash:t.hash}}}},[t._v(t._s(t.$t("header.match.questionBoard")))])],1),t._v(" "),t.match_all_data.public_rank?a("div",{staticClass:"tab-item"},[a("router-link",{attrs:{to:{path:"/match/ranking",query:{event:t.match_id,hash:t.hash}}}},[t._v(t._s(t.$t("header.match.ranking")))])],1):t._e(),t._v(" "),t.match_all_data.public_rank?a("div",{staticClass:"tab-item"},[a("router-link",{attrs:{to:{path:"/match/trend",query:{event:t.match_id,hash:t.hash}}}},[t._v(t._s(t.$t("header.match.trend")))])],1):t._e()]),t._v(" "),a("span",{staticClass:"house_link",attrs:{slot:"house_link"},slot:"house_link"},[a("router-link",{attrs:{to:"/"}},[a("span",{staticClass:"myHouse"})])],1)]),t._v(" "),t.match_all_data.index?a("div",{staticClass:"match_top"},[a("div",{staticClass:"match_title"},[a("div",{staticClass:"first_title"},[t._v("\n                "+t._s("EN"==t.$i18n.locale?t.match_all_data.name_en:t.match_all_data.name_zh)+"\n            ")]),t._v(" "),"EN"==t.$i18n.locale&&""!==t.match_all_data.vice_name_en&&"null"!==t.match_all_data.vice_name_en?a("div",[t._v("\n              "+t._s(t.match_all_data.vice_name_en)+"\n            ")]):t._e(),t._v(" "),"CN"==t.$i18n.locale&&""!==t.match_all_data.vice_name_zh&&"null"!==t.match_all_data.vice_name_zh?a("div",[t._v("\n              "+t._s(t.match_all_data.vice_name_zh)+"\n            ")]):t._e()]),t._v(" "),a("div",{staticClass:"timer"},[a("span",{staticClass:"el-icon-time",staticStyle:{"font-size":"20px","vertical-align":"-2px"}}),t._v(" "),1==t.match_status?a("span",[t._v(t._s(t.$t("dialog_list.match_before"))+":")]):t._e(),t._v(" "),0==t.match_status?a("span",[t._v(t._s(t.$t("dialog_list.match_after"))+":")]):t._e(),t._v(" "),2==t.match_status?a("span",[t._v(t._s(t.$t("dialog_list.match_end")))]):t._e(),t._v(" "),2!=t.match_status?a("span",{domProps:{textContent:t._s(t.format_time)}}):t._e()])]):t._e(),t._v(" "),"EN"==t.$i18n.locale?a("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$t(t.$route.meta.title)+" - "+t.match_all_data.name_en,expression:"$t($route.meta.title)+' - '+match_all_data.name_en"}]}):a("router-view",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:t.$t(t.$route.meta.title)+" - "+t.match_all_data.name_zh,expression:"$t($route.meta.title)+' - '+ match_all_data.name_zh"}]}),t._v(" "),a("el-dialog",{attrs:{title:t.$t("dialog_list.tips"),visible:t.dialogVisible,width:"600px",center:"","custom-class":"public-dialog"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[a("span",{staticClass:"el-icon-warning success_icon"}),t._v(" "),a("span",{staticClass:"font16"},[t._v(t._s(t.$t("guide.match_end")))])]),t._v(" "),t.user.is_temp?a("div",{staticClass:"mrg20T",staticStyle:{"font-size":"14px"}},[t._v("\n        "+t._s(t.$t("selfHelp_competition.account_warning"))+"\n      ")]):t._e()]),t._v(" "),a("el-dialog",{attrs:{title:t.$t("dialog_list.tips"),visible:t.changName,width:"700px",center:"","custom-class":"public-dialog label_white"},on:{"update:visible":function(e){t.changName=e}}},[a("div",{staticClass:"text-left pad20L"},[t.team.has_team&&t.user.is_head?a("div",[a("div",{staticClass:"mrg30B mrg20L"},[a("span",[t._v(t._s(t.$t("selfHelp_competition.default_team_name"))+":")]),t._v(" "),a("span",[t._v(t._s(t.def_team_name))])]),t._v(" "),a("el-form",{ref:"headNameForm",staticStyle:{padding:"0 150px 0 0"},attrs:{model:t.headNameForm,rules:t.headNameRules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:t.$t("selfHelp_competition.edit_team_name"),prop:"teamName"}},[a("el-input",{model:{value:t.headNameForm.teamName,callback:function(e){t.$set(t.headNameForm,"teamName",e)},expression:"headNameForm.teamName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:t.$t("selfHelp_competition.change_nickname"),prop:"userName"}},[a("el-input",{model:{value:t.headNameForm.userName,callback:function(e){t.$set(t.headNameForm,"userName",e)},expression:"headNameForm.userName"}})],1),t._v(" "),a("el-form-item",{staticClass:"text-center"},[a("el-button",{staticClass:"cancelchangeName mrg30R",attrs:{type:"primary"},on:{click:function(e){return t.cancel_changeName()}}},[t._v(t._s(t.$t("el.messagebox.cancel")))]),t._v(" "),a("el-button",{staticClass:"changeName",attrs:{type:"primary"},on:{click:function(e){return t.changNameHandle("headNameForm")}}},[t._v(t._s(t.$t("el.messagebox.confirm")))])],1)],1)],1):a("div",[t.team.has_team?a("div",{staticClass:"mrg30B mrg20L"},[a("span",[t._v(t._s(t.$t("selfHelp_competition.team_name"))+":")]),t._v(" "),a("span",[t._v(t._s(t.def_team_name))])]):t._e(),t._v(" "),a("el-form",{ref:"headNameForm",staticStyle:{padding:"0 150px 0 0"},attrs:{model:t.headNameForm,rules:t.teamerNameRules,"label-width":"180px"}},[a("el-form-item",{attrs:{label:t.$t("selfHelp_competition.change_nickname"),prop:"userName"}},[a("el-input",{model:{value:t.headNameForm.userName,callback:function(e){t.$set(t.headNameForm,"userName",e)},expression:"headNameForm.userName"}})],1),t._v(" "),a("el-form-item",{staticClass:"text-center"},[a("el-button",{staticClass:"cancelchangeName mrg30R",attrs:{type:"primary"},on:{click:function(e){return t.cancel_changeName()}}},[t._v(t._s(t.$t("el.messagebox.cancel")))]),t._v(" "),a("el-button",{staticClass:"changeName",attrs:{type:"primary"},on:{click:function(e){return t.changNameHandle("headNameForm")}}},[t._v(t._s(t.$t("el.messagebox.confirm")))])],1)],1)],1)])])],1)},staticRenderFns:[]};var p=a("C7Lr")(d,v,!1,function(t){a("uBjg"),a("KeJX")},"data-v-510fffec",null);e.default=p.exports},"8zml":function(t,e,a){t.exports={default:a("VIgr"),__esModule:!0}},"9F6s":function(t,e,a){"use strict";var s=a("4YfN"),i=a.n(s),n=a("VKKs"),o=a("2bvH"),r=a("u8pK"),l=Object(o.a)("task"),c=l.mapState,_=l.mapMutations,m={components:{switchLanguage:r.a},inject:["reload"],data:function(){return{user_data:{},show_list:!1,show_user:!1,person_auth:!1}},props:["show_lang","logo"],created:function(){var t=this;Object(n.a)("isUserLogin","object")&&(this.person_auth=Object(n.a)("isUserLogin","object").user.is_temp,this.person_auth||this.$http.get("/api/personal/user").then(function(e){e.data.success&&t.setData({userInformation:e.data.message.user})}).catch(function(t){})),this.show_user=!(!localStorage.isUserLogin||this.person_auth)},methods:i()({},_(["setData"]),{clearUser:function(){var t=this;this.$http.get("/api/auth/logout").then(function(e){e.data.success&&(localStorage.removeItem("isUserLogin"),t.setData({show_now_task:!1}),t.setData({userInformation:""}),t.$router.push({path:"/"}),t.reload())})},showHandle:function(){this.show_list=!0},hidelist:function(){this.show_list=!1}}),computed:i()({},c(["show_now_task","userInformation"])),mounted:function(){}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"header"},[t.logo.hasLink?a("router-link",{staticClass:"ad_logo",attrs:{to:t.logo.jump}},[a("img",{attrs:{src:t.logo.url,alt:"",width:"240"}})]):a("span",{staticClass:"ad_logo"},[a("img",{attrs:{src:t.logo.url,alt:"",width:"240"}})]),t._v(" "),a("div",{staticClass:"tab_list"},[t._t("nav_content")],2),t._v(" "),t.person_auth?a("span",{staticClass:"auth_logout",on:{click:t.clearUser}},[t._v(t._s(t.$t("header.logout")))]):t._e(),t._v(" "),a("div",{staticClass:"user_handle"},[t._t("house_link"),t._v(" "),a("switchLanguage",{directives:[{name:"show",rawName:"v-show",value:t.show_lang,expression:"show_lang"}]}),t._v(" "),t._t("message_tips"),t._v(" "),t.show_user?a("div",{staticClass:"user_info",on:{mouseover:t.showHandle,mouseout:t.hidelist}},[t.userInformation||""!==t.userInformation?a("div",{staticClass:"user_detail clearfix"},[a("span",{staticClass:"user_logo",style:{backgroundImage:"url("+t.userInformation.logo+")",backgroundSize:"cover"}}),t._v(" "),a("span",{staticClass:"user_name"},[t._v(t._s(t.userInformation.nickname))])]):t._e(),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.show_list,expression:"show_list"}],staticClass:"handle_box"},[a("ul",[t.person_auth?t._e():a("li",[a("router-link",{attrs:{to:"/personal"}},[t._v(t._s(t.$t("header.personal.home")))])],1),t._v(" "),a("li",[a("span",{attrs:{id:"signout"},on:{click:t.clearUser}},[t._v(t._s(t.$t("header.logout")))])])])])]):t._e()],2)],1)},staticRenderFns:[]};var u=a("C7Lr")(m,h,!1,function(t){a("fMyL")},"data-v-5c5eb298",null);e.a=u.exports},Iobq:function(t,e,a){var s=a("8leu");s(s.S+s.F*!a("berT"),"Object",{defineProperties:a("Vs//")})},Jwlx:function(t,e,a){t.exports={default:a("TISM"),__esModule:!0}},KeJX:function(t,e){},MQTS:function(t,e,a){"use strict";a.d(e,"a",function(){return s});var s=function(t){var e=parseInt(t/864e5),a=parseInt(t%864e5/36e5),s=parseInt(t%36e5/6e4),i=t%6e4/1e3,n=void 0,o=void 0,r=void 0,l=void 0;localStorage.lang&&"CN"!=localStorage.lang?(n="Day ",o="H ",r="M ",l="S "):(n="天",o="时",r="分",l="秒");var c="";return 0!==e&&(c=e+n),c+(0==a?0==e?"":0+o:a+o)+(0==s?0==e&&0==a?"":0+r:s+r)+(i+l)}},TISM:function(t,e,a){a("V+Qz"),t.exports=a("Rv9F").Object.freeze},"V+Qz":function(t,e,a){var s=a("PUvy"),i=a("jE8/").onFreeze;a("tTxE")("freeze",function(t){return function(e){return t&&s(e)?t(i(e)):e}})},VIgr:function(t,e,a){a("Iobq");var s=a("Rv9F").Object;t.exports=function(t,e){return s.defineProperties(t,e)}},fMyL:function(t,e){},uBjg:function(t,e){},x11r:function(t,e,a){"use strict";e.__esModule=!0;var s=n(a("8zml")),i=n(a("Jwlx"));function n(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e){return(0,i.default)((0,s.default)(t,{raw:{value:(0,i.default)(e)}}))}}});